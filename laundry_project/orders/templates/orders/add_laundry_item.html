{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg">
  <h1 class="text-3xl font-bold text-blue-700 mb-6 text-center">🧺 Tambah Laundry Item</h1>

  <form method="post" enctype="multipart/form-data" class="mb-6">
    {% csrf_token %}
    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-1">Nama Item</label>
      <input type="text" name="name" required
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400">
    </div>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-1">Harga (Rp)</label>
      <input type="number" name="price" required min="0"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400">
    </div>

    <div class="mb-4">
      <label class="block font-medium text-gray-700 mb-1">Gambar Item</label>
      <input type="file" name="image" accept="image/*"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-50 cursor-pointer focus:ring-2 focus:ring-blue-400">
      <p class="text-sm text-gray-500 mt-1">Format: JPG, PNG, max 2MB</p>
    </div>

    <div class="text-center mt-6">
      <button type="submit"
        class="bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-2 rounded-lg transition-all duration-300 shadow">
        ➕ Tambahkan Item
      </button>
    </div>
  </form>

  <hr class="my-6">

  <h2 class="text-xl font-semibold text-gray-700 mb-4">📋 Daftar Item Laundry</h2>
  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden">
      <thead class="bg-gray-100 text-gray-700">
        <tr>
          <th class="px-4 py-2 text-left">#</th>
          <th class="px-4 py-2 text-left">Gambar</th>
          <th class="px-4 py-2 text-left">Nama Item</th>
          <th class="px-4 py-2 text-left">Harga (Rp)</th>
          <th class="px-4 py-2 text-center">Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% for item in laundry_items %}
        <tr class="border-t hover:bg-blue-50 transition">
          <td class="px-4 py-2">{{ forloop.counter }}</td>
          <td class="px-4 py-2">
            {% if item.image %}
              <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-16 h-16 object-cover rounded-lg border">
            {% else %}
              <div class="w-16 h-16 flex items-center justify-center bg-gray-100 text-gray-400 rounded-lg border">
                ❌
              </div>
            {% endif %}
          </td>
          <td class="px-4 py-2 font-medium">{{ item.name }}</td>
          <td class="px-4 py-2">Rp{{ item.price|floatformat:0 }}</td>
          <td class="px-4 py-2 text-center space-x-2">
            <a href="{% url 'orders:edit_laundry_item' item.id %}"
              class="text-blue-500 hover:text-blue-700 font-semibold text-sm">✏️ Edit</a>
            <a href="{% url 'orders:delete_laundry_item' item.id %}"
              onclick="return confirm('Yakin ingin menghapus item ini?')"
              class="text-red-500 hover:text-red-700 font-semibold text-sm">🗑️ Hapus</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center py-4 text-gray-500">Belum ada item laundry.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
